## 개발 서버

개발 서버(Development Server)는 로컬 개발 환경에서 애플리케이션을 실행하고 테스트할 수 있게 해주는 도구예요.
웹팩에서는 `webpack-dev-server` 패키지로 개발 서버를 제공해요.

## 개발 서버의 필요성

일반적으로 HTML 파일을 브라우저에서 직접 열어 확인할 수도 있지만, 다음과 같은 문제가 발생할 수 있어요:

- 파일 프로토콜(`file://`)로 접근하므로 CORS 정책에 막혀 API 통신이 안 될 수 있어요
- 코드를 수정할 때마다 수동으로 새로고침해야 해요
- 실제 서버 환경과 다른 동작을 할 수 있어요

개발 서버는 이러한 문제를 해결하고, 더 나은 개발 경험을 제공해요.

## 설치하기

개발 서버를 사용하려면 먼저 `webpack-dev-server`를 설치해야 해요.

```bash
npm install --save-dev webpack-dev-server
```

## 기본 설정

웹팩 설정 파일에서 `devServer` 옵션을 추가하면 개발 서버를 설정할 수 있어요.

```js
// webpack.config.js
const path = require('path');

module.exports = {
  entry: './src/index.js',
  output: {
    filename: 'bundle.js',
    path: path.resolve(__dirname, 'dist'),
  },
  devServer: {
    static: {
      directory: path.join(__dirname, 'public'),
    },
    port: 3000,
  },
};
```

그리고 `package.json`에 스크립트를 추가하면 편리하게 실행할 수 있어요.

```json
{
  "scripts": {
    "start": "webpack serve --mode development"
  }
}
```

이제 `npm start` 명령어로 개발 서버를 실행하면 `http://localhost:3000`에서 애플리케이션을 확인할 수 있어요.

## 주요 옵션

### static

정적 파일(HTML, 이미지 등)을 서빙할 디렉토리를 지정해요.

```js
devServer: {
  static: {
    directory: path.join(__dirname, 'public'),
  },
}
```

### port

개발 서버가 실행될 포트를 지정해요. 기본값은 8080이에요.

```js
devServer: {
  port: 3000,
}
```

### open

서버 시작 시 자동으로 브라우저를 열어줘요.

```js
devServer: {
  open: true,
}
```

### hot

HMR(Hot Module Replacement)을 활성화해요. 코드 변경 시 전체 페이지를 새로고침하지 않고 변경된 모듈만 교체해요.

```js
devServer: {
  hot: true,
}
```

### historyApiFallback

React Router 같은 클라이언트 사이드 라우팅을 사용할 때 유용한 옵션이에요. 모든 404 응답을 `index.html`로 리다이렉트해요.

```js
devServer: {
  historyApiFallback: true,
}
```

### proxy

개발 중 API 서버로 요청을 프록시할 때 사용해요. CORS 문제를 해결하는 데 유용해요.

```js
devServer: {
  proxy: {
    '/api': {
      target: 'http://localhost:8080',
      pathRewrite: { '^/api': '' },
      changeOrigin: true,
    },
  },
}
```

이렇게 설정하면 `/api/users` 요청이 `http://localhost:8080/users`로 전달돼요.

### compress

gzip 압축을 활성화하여 응답 크기를 줄여요.

```js
devServer: {
  compress: true,
}
```

## 메모리 기반 파일 시스템

`webpack-dev-server`는 빌드 결과물을 디스크에 저장하지 않고 메모리에 유지해요. 이렇게 하면 빌드 속도가 빠르고, 디스크 I/O를 줄일 수 있어요.

따라서 개발 서버를 실행해도 `dist` 폴더에 파일이 생성되지 않아요. 실제 빌드 결과물이 필요하다면 `webpack` 명령어로 별도로 빌드해야 해요.

```json
{
  "scripts": {
    "start": "webpack serve --mode development",
    "build": "webpack --mode production"
  }
}
```

## 다음 단계

개발 서버를 설정했다면, 이제 더 빠른 개발 경험을 위한 HMR(Hot Module Replacement)에 대해 알아볼게요.
